{% extends "base.html" %}

{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    var like_count = 0
    $(document).ready(function(){
        $(".like-click").click(
            function() {
                like_count += 1 
                if (like_count % 2 == 0) {
                    $(this).removeClass("fas fa-thumbs-up").addClass("far fa-thumbs-up");
                }
                if (like_count % 2 == 1) {
                    $(this).removeClass("far fa-thumbs-up").addClass("fas fa-thumbs-up");
                }
            }
        );
    });
    $(document).ready(function(){
        $(".like-hover").hover(
            function() {
                if (like_count % 2 == 0) {
                    $(this).removeClass("far fa-comment").addClass("fas fa-comment");
                }
            }, 
            function() {
                if (like_count % 2 == 0) {
                $(this).removeClass("fas fa-comment").addClass("far fa-comment");
                }
            }               
        );
    });

    $(document).ready(function(){
        $(".comment-hover").hover(
            function() {
                $(this).removeClass("far fa-comment").addClass("fas fa-comment");
            }, 
            function() {
                $(this).removeClass("fas fa-comment").addClass("far fa-comment");
            }               
        );
    });
</script>

<div class="container">
    <div class="profile">
        <div class="profile-content">
            <img class="profile-picture" src="{{ user.avatar(128) }}">
        </div>
        <div class="profile-content">
            <h1>{{ user.username }}</h1>
            {% if user.bio %}
            <p>{{ user.bio }}</p>
            {% endif %}
            {% if user.last_active %}
            <p><i>Last Active: {{ moment(user.last_active).format('LLL') }}</i></p>
            {% endif %}
            <button class="button" type="button" onclick="location.href=('/edit_profile')">Edit Profile</button>
        </div>
    </div>
    <br>
    {% if user.posts_count() == 1 %}
    <h3>{{ user.posts_count() }} Post:</h3>
    {% else %}
    <h3>{{ user.posts_count() }} Posts:</h3>
    {% endif %}

    {% for post in posts %}
    <div id="div" class="post" style="cursor: pointer;">
        <div class="post-content" onclick="location.href=('/post/{{post.id}}' )" >
            <div class="post-text">
                <h3>{{ post.title }}</h3>
                <pre>{{ post.body }}</pre>
            </div>
            <div class="timestamp">
                <p1><i>{{ moment(post.timestamp).format('LLL') }}</i></p1>
            </div>
        </div>
        <div class="post-actions">
            <button class="post-action"><i class="far fa-thumbs-up like-click like-hover"></i></button>
            <button class="post-action" type="button" onclick="location.href=('/post/{{post.id}}/comment')">{{ post.comments_count() }} <i class="far fa-comment comment-hover"></i></button>
        </div>
    </div>
    <br>
    {% endfor %}
 </div>
{% endblock %}